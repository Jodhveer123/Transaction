<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ðŸš€ Futuristic Expense Tracker</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: var(--bg);
      color: var(--text);
      margin: 0;
      padding: 0;
      transition: background 0.5s ease, color 0.5s ease;
    }

    :root {
      --bg: #0f0f1a;
      --card: #1a1a2e;
      --text: #e0e0e0;
      --accent: #00f5ff;
      --shadow: 0 0 10px var(--accent);
    }

    .light {
      --bg: #f8f9fa;
      --card: #ffffff;
      --text: #1a1a1a;
      --accent: #0077ff;
      --shadow: 0 0 6px var(--accent);
    }

    header {
      padding: 25px;
      text-align: center;
      background: var(--card);
      box-shadow: var(--shadow);
    }

    header h1 {
      margin: 0;
      font-size: 2rem;
      color: var(--accent);
      text-shadow: var(--shadow);
    }

    .container {
      max-width: 800px;
      margin: 30px auto;
      padding: 25px;
      background: var(--card);
      border-radius: 15px;
      box-shadow: var(--shadow);
    }

    .balance {
      font-size: 1.7rem;
      margin: 20px 0;
      text-align: center;
    }

    .btn {
      background: var(--accent);
      color: #fff;
      border: none;
      padding: 14px 22px;
      border-radius: 10px;
      cursor: pointer;
      margin: 15px 5px;
      font-weight: bold;
      font-size: 1rem;
      box-shadow: var(--shadow);
      transition: 0.3s;
    }
    .btn:hover {
      transform: scale(1.05);
    }

    form, .filters {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-top: 25px;
    }

    input, select {
      padding: 16px;
      border: none;
      border-radius: 10px;
      font-size: 1.05rem;
      width: 100%;
      box-sizing: border-box;
      background: #2a2a3d;
      color: var(--text);
    }

    ul {
      list-style: none;
      padding: 0;
      margin-top: 30px;
    }

    li {
      background: #2a2a3d;
      margin: 12px 0;
      padding: 18px;
      border-radius: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 1rem;
      gap: 20px;
    }

    li span {
      font-size: 0.85rem;
      opacity: 0.8;
      display: block;
      margin-top: 5px;
    }

    .income { color: #00ff88; }
    .expense { color: #ff0055; }

    .btns {
      display: flex;
      gap: 10px;
    }

    .btns button {
      padding: 6px 12px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: bold;
    }

    .delete-btn {
      background: #ff0055;
      color: #fff;
    }

    .edit-btn {
      background: #ffaa00;
      color: #000;
    }

    .hidden {
      display: none;
    }

    canvas {
      margin-top: 25px;
      background: #1a1a2e;
      padding: 15px;
      border-radius: 12px;
      box-shadow: var(--shadow);
    }
    #logoutBtn{
      margin-right: 500px;
    }
  </style>
</head>
<body>
  <header>
    <h1>Daily Expense Tracker</h1>
  </header>

  <!-- Login Page -->
  <div id="loginPage" class="container">
    <h2 style="text-align:center;">Login</h2>
    <form id="loginForm">
      <input type="text" id="username" placeholder="Enter username" required>
      <input type="password" id="password" placeholder="Enter password" required>
      <button class="btn" type="submit">Login</button>
    </form>
  </div>

  <!-- Main App -->
  <div id="appPage" class="container hidden">
    <p class="balance">Balance: â‚¹<span id="balance">0</span></p>
    <button class="btn" id="modeToggle">Toggle Dark/Light</button>
    <button class="btn" id="logoutBtn">Logout</button>

    <!-- Add Transaction Form -->
    <form id="transactionForm">
      <input type="hidden" id="editId">
      <input type="text" id="text" placeholder="Enter description" required>
      <input type="number" id="amount" placeholder="Enter amount (+/-)" required>
      <select id="category" required>
        <option value="">Select Category</option>
        <option>Food</option>
        <option>Transport</option>
        <option>Shopping</option>
        <option>Salary</option>
        <option>Other</option>
      </select>
      <button class="btn" type="submit">Add Transaction</button>
    </form>

    <!-- Filters -->
    <div class="filters">
      <select id="filterCategory">
        <option value="all">Filter by Category (All)</option>
        <option>Food</option>
        <option>Transport</option>
        <option>Shopping</option>
        <option>Salary</option>
        <option>Other</option>
      </select>

      <select id="sortOption">
        <option value="newest">Sort by Newest</option>
        <option value="oldest">Sort by Oldest</option>
        <option value="high">Sort by Highest Amount</option>
        <option value="low">Sort by Lowest Amount</option>
      </select>
    </div>

    <!-- Transactions List -->
    <ul id="list"></ul>

    <!-- Charts -->
    <canvas id="incomeExpenseChart"></canvas>
    <canvas id="categoryChart"></canvas>
  </div>

  <script>
    // Elements
    const loginPage = document.getElementById("loginPage");
    const appPage = document.getElementById("appPage");
    const loginForm = document.getElementById("loginForm");
    const logoutBtn = document.getElementById("logoutBtn");
    const balanceEl = document.getElementById("balance");
    const listEl = document.getElementById("list");
    const form = document.getElementById("transactionForm");
    const modeToggle = document.getElementById("modeToggle");
    const filterCategory = document.getElementById("filterCategory");
    const sortOption = document.getElementById("sortOption");

    let transactions = JSON.parse(localStorage.getItem("transactions")) || [];

    // Fake login
    loginForm.addEventListener("submit", e => {
      e.preventDefault();
      localStorage.setItem("loggedIn", "true");
      loginPage.classList.add("hidden");
      appPage.classList.remove("hidden");
      updateUI();
    });

    // Logout
    logoutBtn.addEventListener("click", () => {
      localStorage.removeItem("loggedIn");
      appPage.classList.add("hidden");
      loginPage.classList.remove("hidden");
    });

    // Check login on load
    if (localStorage.getItem("loggedIn") === "true") {
      loginPage.classList.add("hidden");
      appPage.classList.remove("hidden");
    }

    // Charts
    const incomeExpenseCtx = document.getElementById("incomeExpenseChart").getContext("2d");
    const categoryCtx = document.getElementById("categoryChart").getContext("2d");
    let incomeExpenseChart, categoryChart;

    function renderCharts() {
      const income = transactions.filter(t => t.amount > 0).reduce((a, b) => a + b.amount, 0);
      const expense = transactions.filter(t => t.amount < 0).reduce((a, b) => a + Math.abs(b.amount), 0);

      if (incomeExpenseChart) incomeExpenseChart.destroy();
      incomeExpenseChart = new Chart(incomeExpenseCtx, {
        type: "bar",
        data: {
          labels: ["Income", "Expense"],
          datasets: [{ data: [income, expense], backgroundColor: ["#00ff88", "#ff0055"] }]
        }
      });

      const categoryTotals = {};
      transactions.forEach(t => {
        categoryTotals[t.category] = (categoryTotals[t.category] || 0) + Math.abs(t.amount);
      });

      if (categoryChart) categoryChart.destroy();
      categoryChart = new Chart(categoryCtx, {
        type: "pie",
        data: {
          labels: Object.keys(categoryTotals),
          datasets: [{ data: Object.values(categoryTotals), backgroundColor: ["#00f5ff", "#ffaa00", "#00ff88", "#ff0055", "#8888ff"] }]
        }
      });
    }

    function updateUI() {
      listEl.innerHTML = "";
      let balance = 0;

      let filteredTx = [...transactions];
      if (filterCategory.value !== "all") {
        filteredTx = filteredTx.filter(tx => tx.category === filterCategory.value);
      }

      if (sortOption.value === "newest") {
        filteredTx.sort((a, b) => b.id - a.id);
      } else if (sortOption.value === "oldest") {
        filteredTx.sort((a, b) => a.id - b.id);
      } else if (sortOption.value === "high") {
        filteredTx.sort((a, b) => b.amount - a.amount);
      } else if (sortOption.value === "low") {
        filteredTx.sort((a, b) => a.amount - b.amount);
      }

      filteredTx.forEach(tx => {
        const li = document.createElement("li");
        li.innerHTML = `
          <div>
            <strong>${tx.text} (${tx.category})</strong>
            <span>${tx.date}</span>
          </div>
          <div class="${tx.amount > 0 ? "income" : "expense"}">
            ${tx.amount > 0 ? "+" : ""}â‚¹${tx.amount}
          </div>
          <div class="btns">
            <button class="edit-btn" onclick="editTransaction(${tx.id})">Edit</button>
            <button class="delete-btn" onclick="deleteTransaction(${tx.id})">Delete</button>
          </div>
        `;
        listEl.appendChild(li);
        balance += tx.amount;
      });

      balanceEl.textContent = balance;
      renderCharts();
    }

    form.addEventListener("submit", e => {
      e.preventDefault();
      const text = document.getElementById("text").value;
      const amount = +document.getElementById("amount").value;
      const category = document.getElementById("category").value;
      const editId = document.getElementById("editId").value;

      if (editId) {
        transactions = transactions.map(tx =>
          tx.id == editId ? { ...tx, text, amount, category } : tx
        );
        document.getElementById("editId").value = "";
      } else {
        const now = new Date();
        const dateStr = now.toLocaleString();
        const tx = { id: Date.now(), text, amount, category, date: dateStr };
        transactions.push(tx);
      }

      localStorage.setItem("transactions", JSON.stringify(transactions));
      updateUI();
      form.reset();
    });

    function deleteTransaction(id) {
      transactions = transactions.filter(tx => tx.id !== id);
      localStorage.setItem("transactions", JSON.stringify(transactions));
      updateUI();
    }

    function editTransaction(id) {
      const tx = transactions.find(t => t.id === id);
      if (tx) {
        document.getElementById("text").value = tx.text;
        document.getElementById("amount").value = tx.amount;
        document.getElementById("category").value = tx.category;
        document.getElementById("editId").value = tx.id;
      }
    }

    modeToggle.addEventListener("click", () => {
      document.body.classList.toggle("light");
    });

    filterCategory.addEventListener("change", updateUI);
    sortOption.addEventListener("change", updateUI);

    updateUI();
  </script>
</body>
      </html>
